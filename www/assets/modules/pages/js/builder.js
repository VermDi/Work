var EMB=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function g(){return d("")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t){return function(e){e.target===this&&t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function y(t,e){return new t(e)}let k;function x(t){k=t}function w(t){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.before_update.push(t)}function b(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const A=[],D=[],B=[],C=[],I=Promise.resolve();let T=!1;function L(t){B.push(t)}function j(t){C.push(t)}const E=new Set;let _=0;function P(){const t=k;do{for(;_<A.length;){const t=A[_];_++,x(t),M(t.$$)}for(x(null),A.length=0,_=0;D.length;)D.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];E.has(e)||(E.add(e),e())}B.length=0}while(A.length);for(;C.length;)C.pop()();T=!1,E.clear(),x(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const N=new Set;let z;function H(){z={r:0,c:[],p:z}}function q(){z.r||o(z.c),z=z.p}function O(t,e){t&&t.i&&(N.delete(t),t.i(e))}function S(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),z.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function R(t,e){S(t,1,1,(()=>{e.delete(t.key)}))}function V(t,e,n,o){const c=t.$$.props[e];void 0!==c&&(t.$$.bound[c]=n,void 0===o&&n(t.$$.ctx[c]))}function F(t){t&&t.c()}function W(t,n,i,r){const{fragment:l,after_update:u}=t.$$;l&&l.m(n,i),r||L((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(L)}function Z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(A.push(t),T||(T=!0,I.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,c,i,r,l,u,a,f=[-1]){const d=k;x(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:c.target||d.$$.root};a&&a(p.root);let g=!1;if(p.ctx=i?i(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=c)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](c),g&&G(e,t)),n})):[],p.update(),g=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();c.intro&&O(e.$$.fragment),W(e,c.target,c.anchor,c.customElement),P()}x(d)}class K{$destroy(){Z(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=t=>{let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length;for(var c=0;c<t;c++)e+=n.charAt(Math.floor(Math.random()*o));return e};function U(t,e,n){const o=t.slice();return o[6]=e[n],o}function X(t){let e,n,o,c,i=t[6].prototype.getIco()+"";function r(...e){return t[5](t[6],...e)}return{c(){e=f("div"),$(e,"class","elementBtn svelte-8q0514"),$(e,"title",n=t[6].prototype.getText())},m(t,n){u(t,e,n),e.innerHTML=i,o||(c=h(e,"click",r),o=!0)},p(o,c){t=o,4&c&&i!==(i=t[6].prototype.getIco()+"")&&(e.innerHTML=i),4&c&&n!==(n=t[6].prototype.getText())&&$(e,"title",n)},d(t){t&&s(e),o=!1,c()}}}function Y(t){let e,n=t[6].name!=et(t[1]).type&&(et(t[1])?.supportsInsertion||0==et(t[1]))&&"row"!=et(t[1]).type&&!("block"==et(t[1]).type&&"row"==t[6].name.toLowerCase()),o=n&&X(t);return{c(){o&&o.c(),e=g()},m(t,n){o&&o.m(t,n),u(t,e,n)},p(t,c){6&c&&(n=t[6].name!=et(t[1]).type&&(et(t[1])?.supportsInsertion||0==et(t[1]))&&"row"!=et(t[1]).type&&!("block"==et(t[1]).type&&"row"==t[6].name.toLowerCase())),n?o?o.p(t,c):(o=X(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d(t){o&&o.d(t),t&&s(e)}}}function tt(e){let n,c,i,r,d,g,m,y,k,x,w,b,A,D=e[2],B=[];for(let t=0;t<D.length;t+=1)B[t]=Y(U(e,D,t));return{c(){n=f("div"),c=f("div"),c.textContent="х",i=p(),r=f("h2"),r.textContent="Выбор элементов конструктора",d=p(),g=f("div"),g.textContent="Начните вводить название элемента или блока для быстрого поиска из доступных",m=p(),y=f("div"),k=f("input"),x=p(),w=f("div");for(let t=0;t<B.length;t+=1)B[t].c();$(c,"class","addBlock closePanelWindow svelte-8q0514"),v(r,"font-size","18px"),v(r,"margin-bottom","0px"),v(g,"font-size","11px"),v(g,"padding","5px"),$(k,"type","text"),$(k,"class","search svelte-8q0514"),$(k,"placeholder","Например: code"),v(w,"display","flex"),v(w,"flex-wrap","wrap"),v(w,"margin-top","15px"),$(n,"class","contentPanel svelte-8q0514")},m(t,o){u(t,n,o),l(n,c),l(n,i),l(n,r),l(n,d),l(n,g),l(n,m),l(n,y),l(y,k),l(n,x),l(n,w);for(let t=0;t<B.length;t+=1)B[t].m(w,null);b||(A=[h(c,"click",e[4]),h(k,"keyup",ot)],b=!0)},p(t,[e]){if(14&e){let n;for(D=t[2],n=0;n<D.length;n+=1){const o=U(t,D,n);B[n]?B[n].p(o,e):(B[n]=Y(o),B[n].c(),B[n].m(w,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=D.length}},i:t,o:t,d(t){t&&s(n),a(B,t),b=!1,o(A)}}}function et(t){let e=!1;return t.forEach((t=>{t.isActive&&!e?e=t:"object"==typeof t.data&&t.data.length>0&&!e&&(e=et(t.data))})),e}function nt(t,e){let n=!1;return"object"==typeof t&&t.forEach((t=>{if(t.isActive&&t?.supportsInsertion)return t.data.push(e),n=!0,!0;t.data.length>0&&!n&&(n=nt(t.data,e))})),n}function ot(){let t=document.getElementsByClassName("elementBtn");Array.from(t).forEach((t=>{this.value.length<1||-1!==t.title.indexOf(this.value)?t.style.display="":t.style.display="none"}))}function ct(t,e,n){let{activeAddPanel:o}=e,{blockList:c=[]}=e,{objects:i=[]}=e;function r(t,e){t.stopPropagation(),t.preventDefault();let o=e.prototype.getInitialData(Q(8));nt(i,o)||i.push(o),n(1,i)}return t.$$set=t=>{"activeAddPanel"in t&&n(0,o=t.activeAddPanel),"blockList"in t&&n(2,c=t.blockList),"objects"in t&&n(1,i=t.objects)},[o,i,c,r,t=>{n(0,o=!1)},(t,e)=>r(e,t)]}class it extends K{constructor(t){super(),J(this,t,ct,tt,i,{activeAddPanel:0,blockList:2,objects:1})}}function rt(e){let n,o,c;return{c(){n=f("div"),n.textContent="-",$(n,"class","delBlock svelte-r1bbet")},m(t,i){u(t,n,i),o||(c=h(n,"click",m(e[10])),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function lt(e){let n,c,i,r,a,d=e[0].isActive&&rt(e);return{c(){n=f("div"),c=f("div"),i=p(),d&&d.c(),$(c,"class","wysiwyg svelte-r1bbet"),$(c,"contenteditable","true"),void 0===e[0].data&&L((()=>e[9].call(c))),v(n,"position","relative"),$(n,"class","clearfix")},m(t,o){u(t,n,o),l(n,c),void 0!==e[0].data&&(c.innerHTML=e[0].data),l(n,i),d&&d.m(n,null),r||(a=[h(c,"focus",e[7]),h(c,"blur",e[8]),h(c,"input",e[9]),h(n,"click",e[6])],r=!0)},p(t,[e]){1&e&&t[0].data!==c.innerHTML&&(c.innerHTML=t[0].data),t[0].isActive?d?d.p(t,e):(d=rt(t),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},i:t,o:t,d(t){t&&s(n),d&&d.d(),r=!1,o(a)}}}function ut(){return"Блок с виз редактором [wysiwygBlock]"}function st(){return'<svg width="30" height="40" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3.75 7.5L26.25 7.5M3.75 21V9.00002C3.75 7.59988 3.75 6.89983 4.02248 6.36505C4.26217 5.89465 4.64434 5.51217 5.11475 5.27248C5.64953 5 6.35011 5 7.75024 5H22.2502C23.6504 5 24.35 5 24.8847 5.27248C25.3551 5.51217 25.7381 5.89465 25.9778 6.36505C26.2503 6.89983 26.25 7.59988 26.25 9.00002V21C26.25 22.4001 26.2503 23.1002 25.9778 23.635C25.7381 24.1054 25.3551 24.4879 24.8847 24.7276C24.35 25 23.6504 25 22.2502 25L7.75024 25C6.35011 25 5.64953 25 5.11475 24.7276C4.64434 24.4879 4.26217 24.1054 4.02248 23.635C3.75 23.1002 3.75 22.4002 3.75 21Z" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<rect x="4" y="5" width="22" height="6" fill="#9D9D9D"/>\n<line x1="8" y1="15" x2="22" y2="15" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round"/>\n<line x1="8" y1="19" x2="16" y2="19" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round"/>\n</svg>wysiwyg'}function at(t){return{id:t,isActive:!1,type:"wysiwyg",data:[],supportsInsertion:!1}}function ft(){return"wysiwyg"}function dt(t,e,n){let{item:o=[]}=e;function c(){n(0,o=null)}return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,c,ut,st,at,ft,function(e){b.call(this,t,e)},function(e){b.call(this,t,e)},function(e){b.call(this,t,e)},function(){o.data=this.innerHTML,n(0,o)},()=>c()]}class pt extends K{constructor(t){super(),J(this,t,dt,lt,i,{getText:2,getIco:3,item:0,getInitialData:4,getBlockType:5})}get getText(){return ut}get getIco(){return st}get getInitialData(){return at}get getBlockType(){return ft}}function gt(e){let n,o,c;return{c(){n=f("div"),n.textContent="-",$(n,"class","delBlock svelte-13nb5uo")},m(t,i){u(t,n,i),o||(c=h(n,"click",m(e[11])),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function ht(e){let n,c,i,r,a,d,g=e[0].isActive&&gt(e);return{c(){n=f("div"),c=f("textarea"),r=p(),g&&g.c(),$(c,"class","textareaBlock svelte-13nb5uo"),c.value=i=e[0].data,$(n,"class","clearfix"),v(n,"position","relative")},m(t,o){u(t,n,o),l(n,c),l(n,r),g&&g.m(n,null),a||(d=[h(c,"focus",e[7]),h(c,"blur",e[8]),h(c,"click",m(e[9])),h(c,"change",e[10])],a=!0)},p(t,[e]){1&e&&i!==(i=t[0].data)&&(c.value=i),t[0].isActive?g?g.p(t,e):(g=gt(t),g.c(),g.m(n,null)):g&&(g.d(1),g=null)},i:t,o:t,d(t){t&&s(n),g&&g.d(),a=!1,o(d)}}}function mt(){return"Блок с кодом [codeBlock]"}function $t(){return'<svg width="30" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M35 32L42 25L35 18" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M16 32L9 25L16 18" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n<line x1="28.7707" y1="11.1857" x2="22.9606" y2="38.5763" stroke="#9D9D9D" stroke-width="2" stroke-linecap="round"/>\n</svg>code'}function vt(t){return{id:t,isActive:!1,type:"code",data:[],supportsInsertion:!1}}function yt(){return"code"}function kt(t,e,n){let{item:o=[]}=e;function c(){n(0,o=null)}function i(t){t.stopPropagation(),t.preventDefault(),n(0,o.data=t.target.value,o)}return t.$$set=t=>{"item"in t&&n(0,o=t.item)},[o,c,i,mt,$t,vt,yt,function(e){b.call(this,t,e)},function(e){b.call(this,t,e)},function(e){b.call(this,t,e)},t=>i(t),()=>c()]}class xt extends K{constructor(t){super(),J(this,t,kt,ht,i,{getText:3,getIco:4,item:0,getInitialData:5,getBlockType:6})}get getText(){return mt}get getIco(){return $t}get getInitialData(){return vt}get getBlockType(){return yt}}function wt(t,e,n){const o=t.slice();return o[5]=e[n],o[6]=e,o[7]=n,o}function bt(t,e,n){const o=t.slice();return o[8]=e[n],o}function At(t){let e,n,o=[],c=new Map,i=t[0];const r=t=>t[5].id;for(let e=0;e<i.length;e+=1){let n=wt(t,i,e),l=r(n);c.set(l,o[e]=Ct(l,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=g()},m(t,c){for(let e=0;e<o.length;e+=1)o[e].m(t,c);u(t,e,c),n=!0},p(t,n){7&n&&(i=t[0],H(),o=function(t,e,n,o,c,i,r,l,u,s,a,f){let d=t.length,p=i.length,g=d;const h={};for(;g--;)h[t[g].key]=g;const m=[],$=new Map,v=new Map;for(g=p;g--;){const t=f(c,i,g),l=n(t);let u=r.get(l);u?o&&u.p(t,e):(u=s(l,t),u.c()),$.set(l,m[g]=u),l in h&&v.set(l,Math.abs(g-h[l]))}const y=new Set,k=new Set;function x(t){O(t,1),t.m(l,a),r.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=m[p-1],n=t[d-1],o=e.key,c=n.key;e===n?(a=e.first,d--,p--):$.has(c)?!r.has(o)||y.has(o)?x(e):k.has(c)?d--:v.get(o)>v.get(c)?(k.add(o),x(e)):(y.add(c),d--):(u(n,r),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,r)}for(;p;)x(m[p-1]);return m}(o,n,r,1,t,i,c,e.parentNode,R,Ct,e,wt),q())},i(t){if(!n){for(let t=0;t<i.length;t+=1)O(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)S(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&s(e)}}}function Dt(t){let e,n,o,c;function i(e){t[3](e,t[5],t[6],t[7])}function r(...e){return t[4](t[5],...e)}var l=t[8];function a(t){let e={focus:t[1]};return void 0!==t[5]&&(e.item=t[5]),{props:e}}return l&&(e=y(l,a(t)),D.push((()=>V(e,"item",i,t[5]))),e.$on("click",r)),{c(){e&&F(e.$$.fragment),o=g()},m(t,n){e&&W(e,t,n),u(t,o,n),c=!0},p(c,u){t=c;const s={};if(2&u&&(s.focus=t[1]),!n&&1&u&&(n=!0,s.item=t[5],j((()=>n=!1))),l!==(l=t[8])){if(e){H();const t=e;S(t.$$.fragment,1,0,(()=>{Z(t,1)})),q()}l?(e=y(l,a(t)),D.push((()=>V(e,"item",i,t[5]))),e.$on("click",r),F(e.$$.fragment),O(e.$$.fragment,1),W(e,o.parentNode,o)):e=null}else l&&e.$set(s)},i(t){c||(e&&O(e.$$.fragment,t),c=!0)},o(t){e&&S(e.$$.fragment,t),c=!1},d(t){t&&s(o),e&&Z(e,t)}}}function Bt(t){let e,n,o=t[5].type===t[8].prototype.getBlockType(),c=o&&Dt(t);return{c(){c&&c.c(),e=g()},m(t,o){c&&c.m(t,o),u(t,e,o),n=!0},p(t,n){1&n&&(o=t[5].type===t[8].prototype.getBlockType()),o?c?(c.p(t,n),1&n&&O(c,1)):(c=Dt(t),c.c(),O(c,1),c.m(e.parentNode,e)):c&&(H(),S(c,1,1,(()=>{c=null})),q())},i(t){n||(O(c),n=!0)},o(t){S(c),n=!1},d(t){c&&c.d(t),t&&s(e)}}}function Ct(t,e){let n,o,c,i=e[2],r=[];for(let t=0;t<i.length;t+=1)r[t]=Bt(bt(e,i,t));const l=t=>S(r[t],1,1,(()=>{r[t]=null}));return{key:t,first:null,c(){n=g();for(let t=0;t<r.length;t+=1)r[t].c();o=g(),this.first=n},m(t,e){u(t,n,e);for(let n=0;n<r.length;n+=1)r[n].m(t,e);u(t,o,e),c=!0},p(t,n){if(e=t,7&n){let t;for(i=e[2],t=0;t<i.length;t+=1){const c=bt(e,i,t);r[t]?(r[t].p(c,n),O(r[t],1)):(r[t]=Bt(c),r[t].c(),O(r[t],1),r[t].m(o.parentNode,o))}for(H(),t=i.length;t<r.length;t+=1)l(t);q()}},i(t){if(!c){for(let t=0;t<i.length;t+=1)O(r[t]);c=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)S(r[t]);c=!1},d(t){t&&s(n),a(r,t),t&&s(o)}}}function It(t){let e,n,o=t[0]&&t[0].length>0&&At(t);return{c(){o&&o.c(),e=g()},m(t,c){o&&o.m(t,c),u(t,e,c),n=!0},p(t,[n]){t[0]&&t[0].length>0?o?(o.p(t,n),1&n&&O(o,1)):(o=At(t),o.c(),O(o,1),o.m(e.parentNode,e)):o&&(H(),S(o,1,1,(()=>{o=null})),q())},i(t){n||(O(o),n=!0)},o(t){S(o),n=!1},d(t){o&&o.d(t),t&&s(e)}}}function Tt(t,e,n){let{data:o}=e,{focus:c}=e,i=[];i.push(pt),i.push(xt),i.push(Kt),i.push(zt);return t.$$set=t=>{"data"in t&&n(0,o=t.data),"focus"in t&&n(1,c=t.focus)},[o,c,i,function(t,e,c,i){c[i]=t,n(0,o)},(t,e)=>{e.stopPropagation(),e.preventDefault(),c(t)}]}class Lt extends K{constructor(t){super(),J(this,t,Tt,It,i,{data:0,focus:1})}}function jt(t){let e,n,o;function c(e){t[6](e)}let i={focus:t[1]};return void 0!==t[0].data&&(i.data=t[0].data),e=new Lt({props:i}),D.push((()=>V(e,"data",c,t[0].data))),{c(){F(e.$$.fragment)},m(t,n){W(e,t,n),o=!0},p(t,o){const c={};2&o&&(c.focus=t[1]),!n&&1&o&&(n=!0,c.data=t[0].data,j((()=>n=!1))),e.$set(c)},i(t){o||(O(e.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),o=!1},d(t){Z(e,t)}}}function Et(e){let n,o,c;return{c(){n=f("div"),n.textContent="-",$(n,"class","delBlock svelte-393x8g")},m(t,i){u(t,n,i),o||(c=h(n,"click",m(e[7])),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function _t(t){let e,n,o,c,i,a,d=t[0].data.length>0&&jt(t),g=t[0].isActive&&Et(t);return{c(){e=f("div"),d&&d.c(),n=p(),g&&g.c(),$(e,"class",o=r(t[0].isActive?"block active":"block")+" svelte-393x8g")},m(o,r){u(o,e,r),d&&d.m(e,null),l(e,n),g&&g.m(e,null),c=!0,i||(a=h(e,"click",m(t[5])),i=!0)},p(t,[i]){t[0].data.length>0?d?(d.p(t,i),1&i&&O(d,1)):(d=jt(t),d.c(),O(d,1),d.m(e,n)):d&&(H(),S(d,1,1,(()=>{d=null})),q()),t[0].isActive?g?g.p(t,i):(g=Et(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!c||1&i&&o!==(o=r(t[0].isActive?"block active":"block")+" svelte-393x8g"))&&$(e,"class",o)},i(t){c||(O(d),c=!0)},o(t){S(d),c=!1},d(t){t&&s(e),d&&d.d(),g&&g.d(),i=!1,a()}}}function Pt(){return"block"}function Mt(t){return{id:t,isActive:!1,type:"block",data:[],supportsInsertion:!0}}function Nt(t,e,n){let{focus:o}=e,{item:c}=e;function i(){n(0,c=null)}return t.$$set=t=>{"focus"in t&&n(1,o=t.focus),"item"in t&&n(0,c=t.item)},[c,o,i,Pt,Mt,function(e){b.call(this,t,e)},function(e){t.$$.not_equal(c.data,e)&&(c.data=e,n(0,c))},()=>{i()}]}class zt extends K{constructor(t){super(),J(this,t,Nt,_t,i,{focus:1,item:0,getBlockType:3,getInitialData:4})}get getBlockType(){return Pt}get getInitialData(){return Mt}}function Ht(e){let n,o,c;return{c(){n=f("div"),n.textContent="+",$(n,"class","addBlock svelte-19zr6xe")},m(t,i){u(t,n,i),o||(c=h(n,"click",e[11]),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function qt(e){let n,o,c;return{c(){n=f("div"),n.textContent="-",$(n,"class","delBlock svelte-19zr6xe")},m(t,i){u(t,n,i),o||(c=h(n,"click",e[12]),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function Ot(t){let e,n,o;function c(e){t[13](e)}let i={focus:t[1]};return void 0!==t[4]&&(i.data=t[4]),e=new Lt({props:i}),D.push((()=>V(e,"data",c,t[4]))),{c(){F(e.$$.fragment)},m(t,n){W(e,t,n),o=!0},p(t,o){const c={};2&o&&(c.focus=t[1]),!n&&16&o&&(n=!0,c.data=t[4],j((()=>n=!1))),e.$set(c)},i(t){o||(O(e.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),o=!1},d(t){Z(e,t)}}}function St(t){let e,n,o,c,i,r,a,d=t[0].isActive&&t[5]<12&&Ht(t),g=t[0].isActive&&qt(t),v=t[4].length>0&&Ot(t);return{c(){e=f("div"),d&&d.c(),n=p(),g&&g.c(),o=p(),v&&v.c(),$(e,"class",c="rowLine "+(t[0].isActive?"active":"")+" svelte-19zr6xe")},m(c,s){u(c,e,s),d&&d.m(e,null),l(e,n),g&&g.m(e,null),l(e,o),v&&v.m(e,null),i=!0,r||(a=h(e,"click",m(t[10])),r=!0)},p(t,[r]){t[0].isActive&&t[5]<12?d?d.p(t,r):(d=Ht(t),d.c(),d.m(e,n)):d&&(d.d(1),d=null),t[0].isActive?g?g.p(t,r):(g=qt(t),g.c(),g.m(e,o)):g&&(g.d(1),g=null),t[4].length>0?v?(v.p(t,r),16&r&&O(v,1)):(v=Ot(t),v.c(),O(v,1),v.m(e,null)):v&&(H(),S(v,1,1,(()=>{v=null})),q()),(!i||1&r&&c!==(c="rowLine "+(t[0].isActive?"active":"")+" svelte-19zr6xe"))&&$(e,"class",c)},i(t){i||(O(v),i=!0)},o(t){S(v),i=!1},d(t){t&&s(e),d&&d.d(),g&&g.d(),v&&v.d(),r=!1,a()}}}function Rt(){return"Строчный элемент [row]"}function Vt(){return"Строка"}function Ft(){return"row"}function Wt(t){return{id:t,isActive:!1,type:"row",data:[],supportsInsertion:!0}}function Zt(t){t.forEach(((e,n)=>{null==e?t.splice(n,1):"object"==typeof e.data&&Zt(e.data)}))}function Gt(t){if("object"==typeof t){let e=!1;return t.forEach((t=>{1==t.isActive&&(e=!0),t.data.length>0&&0==e&&(e=Gt(t.data))})),e}}function Jt(t,e,n){let{focus:o}=e,{item:c}=e,i=c.data,r=0;function l(t){t.stopPropagation(),t.preventDefault();let e=zt.prototype.getInitialData(Q(8));i.push(e),n(4,i)}function u(){n(0,c=null)}w((()=>{Zt(i),Gt(i)&&n(0,c.isActive=!1,c),n(4,i),n(5,r=i.length)}));return t.$$set=t=>{"focus"in t&&n(1,o=t.focus),"item"in t&&n(0,c=t.item)},[c,o,l,u,i,r,Rt,Vt,Ft,Wt,function(e){b.call(this,t,e)},t=>l(t),()=>u(),function(t){i=t,n(4,i)}]}class Kt extends K{constructor(t){super(),J(this,t,Jt,St,i,{focus:1,item:0,getText:6,getIco:7,getBlockType:8,getInitialData:9,addBlock:2,delRow:3})}get getText(){return Rt}get getIco(){return Vt}get getBlockType(){return Ft}get getInitialData(){return Wt}get addBlock(){return this.$$.ctx[2]}get delRow(){return this.$$.ctx[3]}}function Qt(e){let n,o,c;return{c(){n=f("div"),n.textContent="+",$(n,"class","firstAdd svelte-mz9v1k")},m(t,i){u(t,n,i),o||(c=h(n,"click",e[10]),o=!0)},p:t,i:t,o:t,d(t){t&&s(n),o=!1,c()}}}function Ut(t){let e,n,o,c,i;function r(e){t[8](e)}let l={focus:t[4]};void 0!==t[2]&&(l.data=t[2]),e=new Lt({props:l}),D.push((()=>V(e,"data",r,t[2])));let a=!t[1]&&Xt(t);return{c(){F(e.$$.fragment),o=p(),a&&a.c(),c=g()},m(t,n){W(e,t,n),u(t,o,n),a&&a.m(t,n),u(t,c,n),i=!0},p(t,o){const i={};!n&&4&o&&(n=!0,i.data=t[2],j((()=>n=!1))),e.$set(i),t[1]?a&&(a.d(1),a=null):a?a.p(t,o):(a=Xt(t),a.c(),a.m(c.parentNode,c))},i(t){i||(O(e.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),i=!1},d(t){Z(e,t),t&&s(o),a&&a.d(t),t&&s(c)}}}function Xt(e){let n,o,c;return{c(){n=f("div"),n.textContent="+",$(n,"class","showPanel svelte-mz9v1k")},m(t,i){u(t,n,i),o||(c=h(n,"click",e[9]),o=!0)},p:t,d(t){t&&s(n),o=!1,c()}}}function Yt(t){let e,n,o,c;function i(e){t[11](e)}function r(e){t[12](e)}let l={blockList:t[3]};return void 0!==t[1]&&(l.activeAddPanel=t[1]),void 0!==t[2]&&(l.objects=t[2]),e=new it({props:l}),D.push((()=>V(e,"activeAddPanel",i,t[1]))),D.push((()=>V(e,"objects",r,t[2]))),e.$on("click",t[13]),{c(){F(e.$$.fragment)},m(t,n){W(e,t,n),c=!0},p(t,c){const i={};!n&&2&c&&(n=!0,i.activeAddPanel=t[1],j((()=>n=!1))),!o&&4&c&&(o=!0,i.objects=t[2],j((()=>o=!1))),e.$set(i)},i(t){c||(O(e.$$.fragment,t),c=!0)},o(t){S(e.$$.fragment,t),c=!1},d(t){Z(e,t)}}}function te(t){let e,n,o,c,i;const r=[Ut,Qt],a=[];function d(t,e){return t[2].length>0?0:1}n=d(t),o=a[n]=r[n](t);let g=t[1]&&Yt(t);return{c(){e=f("div"),o.c(),c=p(),g&&g.c()},m(t,o){u(t,e,o),a[n].m(e,null),l(e,c),g&&g.m(e,null),i=!0},p(t,[i]){let l=n;n=d(t),n===l?a[n].p(t,i):(H(),S(a[l],1,1,(()=>{a[l]=null})),q(),o=a[n],o?o.p(t,i):(o=a[n]=r[n](t),o.c()),O(o,1),o.m(e,c)),t[1]?g?(g.p(t,i),2&i&&O(g,1)):(g=Yt(t),g.c(),O(g,1),g.m(e,null)):g&&(H(),S(g,1,1,(()=>{g=null})),q())},i(t){i||(O(o),O(g),i=!0)},o(t){S(o),S(g),i=!1},d(t){t&&s(e),a[n].d(),g&&g.d()}}}function ee(t){let e=!1;t.forEach(((n,o)=>{null==n?t.splice(o,1):(ne(n.data)&&(e=!0),"object"==typeof n.data&&ee(n.data))})),e&&t.forEach((t=>{t.isActive=!1}))}function ne(t){if("object"==typeof t){let e=!1;return t.forEach((t=>{1==t.isActive&&(e=!0),t.data.length>0&&0==e&&(e=ne(t.data))})),e}}function oe(t){t.stopPropagation(),t.preventDefault()}function ce(t,e,n){w((()=>{ee(i)}));let o=[];o.push(pt),o.push(xt),o.push(Kt);let c=!1,i=[];function r(){n(1,c=!c)}return[oe,c,i,o,function t(e,o=!1){let c=!1;o||(c=!0,o=e,e=i),e.forEach((n=>{n?.id&&n.id==o?.id?n.isActive=!n.isActive:n.isActive=!1,n?.data&&"object"==typeof n.data&&n.data.length>0&&e!=n.data&&t(n.data,o)})),c&&n(2,i)},r,function(){return i},function(t){"object"==typeof t?n(2,i=t):t={}},function(t){i=t,n(2,i)},t=>n(1,c=!c),t=>r(),function(t){c=t,n(1,c)},function(t){i=t,n(2,i)},t=>oe(t)]}class ie extends K{constructor(t){super(),J(this,t,ce,te,i,{stopPropagation:0,getData:6,setData:7})}get stopPropagation(){return oe}get getData(){return this.$$.ctx[6]}get setData(){return this.$$.ctx[7]}}return function(t){return new ie({target:t})}}();
